---
collection_products:
  limit: 2
---

{{assign 'prefix' 'stage_promotion_grid'}}
{{assign 'id' (append prefix '_' section.id)}}
{{assign 'style_id' (append '#' prefix '_' section.id)}}

{{ assign 'blocks' (product_blocks_order_translate section 'blocks' 'block_order')}}
<section id="{{id}}" >
  <div class="stage_promotion_grid {{#if (isFalsey section.settings.enable_full_screen)}}container g-4 g-md-6 {{/if}}">
    <div class="{{prefix}}--container">
      {{#if blocks}}
      {{#each blocks}}
        {{#if (boolean type '==' 'banner')}}
          {{!-- banner --}}
          {{snippet 'promotion-grid/banner' settings=settings}}
        {{else}}
          {{!-- sale collection  --}}
            {{snippet 'promotion-grid/sale-collection' settings=settings sectionSetting=../section.settings}}
        {{/if}}
      {{/each}}
    {{/if}}
    </div>
  </div>
</section>

<style>
  {{style_id}} {
    margin-top: {{#if (isTruthy section.settings.enable_top_space)}}60px{{else}}0{{/if}};
    margin-bottom: {{#if (isTruthy section.settings.enable_bottom_space)}}60px{{else}}0{{/if}};
  }
  {{style_id}} .stage_promotion_grid {
    {{!-- 将第一个上margin和最后一个下margin 抵消掉 --}}
    margin-top: -{{divide section.settings.gap 2}}px;
    margin-bottom: -{{divide section.settings.gap 2}}px;
  }
  {{style_id}} .stage_promotion_grid--container {
  {{#if (isTruthy section.settings.enable_full_screen)}}
    margin: 0 {{divide section.settings.gap 2}}px;
  {{else}}
  {{!-- 不是全屏时, 得用负margin拉回来，否则受item的间距影响 --}}
    margin: 0 -{{divide section.settings.gap 2}}px;
  {{/if}}
  }

  {{!-- 为了当时活动分类在左右都是50%时中间间隔能生效，给每个item都加上了margin和padding来处理间隔 --}}
  {{style_id}} .stage_promotion_grid--block-box {
    margin: {{divide section.settings.gap 2}}px  0px;
    padding: 0 {{divide section.settings.gap 2}}px;
  }
 
  @media only screen and (max-width: 750px){
    {{style_id}} {
      margin-top: {{#if (isTruthy section.settings.enable_top_space)}}40px{{else}}0{{/if}};
      margin-bottom: {{#if (isTruthy section.settings.enable_bottom_space)}}40px{{else}}0{{/if}};
    }
    {{style_id}} .stage_promotion_grid {
      margin-top: -{{divide section.settings.gap 4}}px;
      margin-bottom: -{{divide section.settings.gap 4}}px;
    }
    {{style_id}} .stage_promotion_grid--container {
      padding: 0 {{#if (isTruthy section.settings.enable_full_screen)}}{{divide section.settings.gap 4}}px{{/if}};
      margin: 0;
    }
    {{style_id}} .stage_promotion_grid--block-box {
      margin: {{divide section.settings.gap 4}}px 0px;
      padding: 0 {{#if (isTruthy section.settings.enable_full_screen)}}{{divide section.settings.gap 4}}px{{/if}};
    }
  }
</style>

{{#schema}}
{
  "name": {
    "zh-hans-cn": "活动推广",
    "en": "Campaign promotion",
    "id": "Memajukan promo",
    "th": "กิจกรรมส่งเสริมการขาย",
    "vi": "Hoạt động quảng bá",
    "ms": "Aktiviti promosi",
    "zh-hant-tw": "活動推廣"
  },
  "class": "stage_promotion_grid_section",
  "settings": [
    {
      "type": "switch",
      "id": "enable_full_screen",
      "label": {
        "zh-hans-cn": "启用宽屏展示",
        "en": "Enable the widescreen display",
        "id": "Aktifkan tampilan layar lebar",
        "th": "เปิดใช้งานการแสดงผลแบบจอกว้าง",
        "vi": "Bật hiển thị màn hình rộng",
        "ms": "Dayakan paparan skrin lebar",
        "zh-hant-tw": "啟用寬屏展示"
      },
      "default": false
    },
    {
      "type": "range",
      "id": "gap",
      "label": {
        "zh-hans-cn": "间隔",
        "en": "Interval",
        "id": "Spasi",
        "th": "เว้นช่วงเวลา",
        "vi": "Khoảng cách",
        "ms": "Selang",
        "zh-hant-tw": "間隔"
      },
      "default": 20,
      "max": 40,
      "min": 0,
      "unit": "px"
    },
    {
      "type": "switch",
      "id": "enable_top_space",
      "label": {
        "zh-hans-cn": "增加顶部间距",
        "en": "Add space on the top",
        "id": "Tambah spasi atas",
        "th": "เพิ่มระยะห่างด้านบน",
        "vi": "Thêm khoảng cách phần đỉnh",
        "ms": "Tambah jarak di bahagian atas",
        "zh-hant-tw": "增加頂部間距"
      },
      "default": false
    },
    {
      "type": "switch",
      "id": "enable_bottom_space",
      "label": {
        "zh-hans-cn": "增加底部间距",
        "en": "Add space at the bottom",
        "id": "Tambah spasi bawah",
        "th": "เพิ่มระยะห่างด้านล่าง",
        "vi": "Thêm khoảng cách phần cuối",
        "ms": "Tambah jarak di bahagian bawah",
        "zh-hant-tw": "增加底部間距"
      },
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": {
        "zh-hans-cn": "横幅",
        "en": "Banner",
        "id": "Spanduk",
        "th": "แบนเนอร์",
        "vi": "Băng rôn",
        "ms": "Sepanduk",
        "zh-hant-tw": "橫幅"
      },
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": {
            "zh-hans-cn": "标题",
            "en": "Title",
            "id": "Judul",
            "th": "หัวข้อ",
            "vi": "Tiêu đề",
            "ms": "Tajuk",
            "zh-hant-tw": "標題"
          },
          "default": "Banner promotion"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": {
            "zh-hans-cn": "正文",
            "en": "Body text",
            "id": "Teks",
            "th": "ข้อความ",
            "vi": "Nội dung chính",
            "ms": "Teks",
            "zh-hant-tw": "正文"
          },
          "default": "Add the details of your promotion in smaller text"
        },
        {
          "type": "text",
          "id": "btn_text",
          "label": {
            "zh-hans-cn": "按钮文案",
            "en": "Button text",
            "id": "Tulisan tombol",
            "th": "ข้อความปุ่ม",
            "vi": "Nội dung nút",
            "ms": "Salinan butang",
            "zh-hant-tw": "按鈕文案"
          },
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "link",
          "label": {
            "zh-hans-cn": "跳转链接",
            "en": "URL",
            "id": "lompat link",
            "th": "ลิงก์กระโดดข้าม",
            "vi": "Link chuyển đổi",
            "ms": "Pautan lompat",
            "zh-hant-tw": "跳轉鏈接"
          }
        },
        {
          "type": "image_picker",
          "id": "image_url",
          "label": {
            "zh-hans-cn": "图片",
            "en": "Image",
            "id": "Gambar",
            "th": "รูปภาพ",
            "vi": "Hình ảnh",
            "ms": "Gambar",
            "zh-hant-tw": "圖片"
          }
        },
        {
          "type": "select",
          "id": "color_scheme",
          "label": {
            "zh-hans-cn": "颜色风格",
            "en": "Color scheme",
            "id": "Gaya warna",
            "th": "สไตล์สี",
            "vi": "Phong cách màu sắc",
            "ms": "Gaya warna",
            "zh-hant-tw": "顏色風格"
          },
          "options": [
            {
              "value": "none",
              "label": {
                "zh-hans-cn": "无",
                "en": "None",
                "id": "Tidak ada",
                "th": "ไม่มี",
                "vi": "Không",
                "ms": "Tiada",
                "zh-hant-tw": "無"
              }
            },
            {
              "value": "1",
              "label": {
                "zh-hans-cn": "风格1",
                "en": "Style 1",
                "id": "Gaya 1",
                "th": "สไตล์ 1",
                "vi": "Phong cách 1",
                "ms": "Gaya 1",
                "zh-hant-tw": "風格1"
              }
            },
            {
              "value": "2",
              "label": {
                "zh-hans-cn": "风格2",
                "en": "Style 2",
                "id": "Gaya 2",
                "th": "สไตล์2",
                "vi": "Phong cách 2",
                "ms": "Gaya 2",
                "zh-hant-tw": "風格2"
              }
            },
            {
              "value": "3",
              "label": {
                "zh-hans-cn": "风格3",
                "en": "Style 3",
                "id": "Gaya 3",
                "th": "สไตล์ 3",
                "vi": "Phong cách 3",
                "ms": "Gaya 3",
                "zh-hant-tw": "風格3"
              }
            }
          ],
          "default": "1"
        }
      ]
    },
    {
      "type": "sale_collection",
      "name": {
        "zh-hans-cn": "分类",
        "en": "Collection",
        "id": "Buat kategori",
        "th": "หมวดหมู่",
        "vi": "Phân loại",
        "ms": "Kategori",
        "zh-hant-tw": "分類"
      },
      "icon": "productCategories",
      "settings": [
        {
          "type": "collection_picker",
          "id": "product_categories",
          "label": {
            "zh-hans-cn": "商品分类",
            "en": "Collection list",
            "id": "Klasifikasi produk",
            "th": "หมวดหมู่",
            "vi": "Phân loại sản phẩm",
            "ms": "Produk kategori",
            "zh-hant-tw": "商品分類"
          }
        },
        {
          "type": "text",
          "id": "top_content",
          "label": {
            "zh-hans-cn": "顶部文案",
            "en": "Texts on the top",
            "id": "Teks atas",
            "th": "ข้อความด้านบนสุด",
            "vi": "Chữ phần đầu",
            "ms": "Salinan bahagian atas",
            "zh-hant-tw": "頂部文案"
          },
          "default": "Up to"
        },
        {
          "type": "text",
          "id": "middle_content",
          "label": {
            "zh-hans-cn": "中部文案",
            "en": "Texts in the middle",
            "id": "Teks tengah",
            "th": "ข้อความตรงกลาง",
            "vi": "Chữ phần giữa",
            "ms": "Salinan bahagian tengah",
            "zh-hant-tw": "中部文案"
          },
          "default": "50% off"
        },
        {
          "type": "text",
          "id": "bottom_content",
          "label": {
            "zh-hans-cn": "底部文案",
            "en": "Texts at the bottom",
            "id": "Teks bawah",
            "th": "ข้อความด้านล่าง",
            "vi": "Chữ phần cuối",
            "ms": "Salinan bahagian bawah",
            "zh-hant-tw": "底部文案"
          },
          "default": "Select products"
        },
        {
          "type": "select",
          "id": "width",
          "label": {
            "zh-hans-cn": "宽度",
            "en": "Width",
            "id": "Lebar",
            "th": "ความกว้าง",
            "vi": "Độ rộng",
            "ms": "Lebar",
            "zh-hant-tw": "寬度"
          },
          "options": [
            {
              "value": "50%",
              "label": {
                "zh-hans-cn": "50%",
                "en": "50%",
                "id": "0.5",
                "th": "0.5",
                "vi": "0.5",
                "ms": "0.5",
                "zh-hant-tw": "0.5"
              }
            },
            {
              "value": "100%",
              "label": {
                "zh-hans-cn": "100%",
                "en": "100%",
                "id": "1",
                "th": "1",
                "vi": "1",
                "ms": "1",
                "zh-hant-tw": "1"
              }
            }
          ],
          "default": "50%"
        },
        {
          "type": "select",
          "id": "color_scheme",
          "label": {
            "zh-hans-cn": "颜色风格",
            "en": "Color scheme",
            "id": "Gaya warna",
            "th": "สไตล์สี",
            "vi": "Phong cách màu sắc",
            "ms": "Gaya warna",
            "zh-hant-tw": "顏色風格"
          },
          "options": [
            {
              "value": "none",
              "label": {
                "zh-hans-cn": "无",
                "en": "None",
                "id": "Tidak ada",
                "th": "ไม่มี",
                "vi": "Không",
                "ms": "Tiada",
                "zh-hant-tw": "無"
              }
            },
            {
              "value": "1",
              "label": {
                "zh-hans-cn": "风格1",
                "en": "Style 1",
                "id": "Gaya 1",
                "th": "สไตล์ 1",
                "vi": "Phong cách 1",
                "ms": "Gaya 1",
                "zh-hant-tw": "風格1"
              }
            },
            {
              "value": "2",
              "label": {
                "zh-hans-cn": "风格2",
                "en": "Style 2",
                "id": "Gaya 2",
                "th": "สไตล์2",
                "vi": "Phong cách 2",
                "ms": "Gaya 2",
                "zh-hant-tw": "風格2"
              }
            },
            {
              "value": "3",
              "label": {
                "zh-hans-cn": "风格3",
                "en": "Style 3",
                "id": "Gaya 3",
                "th": "สไตล์ 3",
                "vi": "Phong cách 3",
                "ms": "Gaya 3",
                "zh-hant-tw": "風格3"
              }
            }
          ],
          "default": "1"
        }
      ]
    }
  ],
  "max_blocks": 15,
  "presets": [
    {
      "name": {
        "zh-hans-cn": "活动推广",
        "en": "Campaign promotion",
        "id": "Memajukan promo",
        "th": "กิจกรรมส่งเสริมการขาย",
        "vi": "Hoạt động quảng bá",
        "ms": "Aktiviti promosi",
        "zh-hant-tw": "活動推廣"
      },
      "category": {
        "zh-hans-cn": "内容展示",
        "en": "Content display",
        "id": "Tampilan Isi",
        "th": "การแสดงเนื้อหา",
        "vi": "Hiển thị nội dung",
        "ms": "Paparan kandungan",
        "zh-hant-tw": "內容展示"
      },
      "settings": {
        "enable_full_screen": false,
        "gap": 20,
        "enable_top_space": false,
        "enable_bottom_space": false
      },
      "blocks": [
        {
          "type": "banner",
          "settings": {
            "color_scheme": 1,
            "title": "Banner promotion",
            "content": "add the details of your promotion in smaller text",
            "btn_text": "Shop  now",
            "link": null,
            "image_url": null
          }
        },
        {
          "type": "sale_collection",
          "settings": {
            "color_scheme": "1",
            "product_categories": "",
            "top_content": "UP to",
            "middle_content": "50% off",
            "bottom_content": "Select products",
            "width": "50%"
          }
        },
        {
          "type": "sale_collection",
          "settings": {
            "color_scheme": "1",
            "product_categories": "",
            "top_content": "UP to",
            "middle_content": "50% off",
            "bottom_content": "Select products",
            "width": "50%"
          }
        }
      ]
    }
  ]
}
{{/schema}}