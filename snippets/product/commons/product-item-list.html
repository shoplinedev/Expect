{{!-- 可传参数：
listData: 商品列表数据，字段参考plp列表数据
colNum: 展示列数,默认展示4行
total: 列表数据总数
pageSize: 每一页的数量
pageNum: 当前页数
forbiddenBtn:禁止加购按钮
--}}

{{assign '_colNum' 4}}

{{#if colNum}}
  {{assign '_colNum' colNum}}
{{/if}}

{{assign 'real_product_img_width' (divide 1200 _colNum)}}

{{#if request.is_mobile}}
  {{assign 'real_product_img_width' 300}}
{{/if}}

{{ assign 'listLayoutObj' (JSONparse (append (append '{"large_grid": "row-cols-1 row-cols-md-2 product-list-large-grid", "small_grid": "row-cols-2 row-cols-lg-3 row-cols-xl-' _colNum ) ' product-list-small-grid", "list": "row-cols-1 row-cols-md-1 product-list-single-grid"}' ) )  }}

{{ assign 'productListCls' ( default (get gripType listLayoutObj) (get 'small_grid' listLayoutObj) ) }}
{{assign 'containerMaxWidth' (default containerMaxWidth theme.settings.page_width)}}
{{ assign 'pcListLayoutSizeObj' (JSONparse '{"large_grid": "2", "small_grid": "4", "list": "1"}')  }}
{{ assign 'mListLayoutSizeObj' (JSONparse '{"large_grid": "1", "small_grid": "2", "list": "1"}')  }}
{{ assign 'pcSizeNum' ( default (get gripType pcListLayoutSizeObj) (get 'small_grid' pcListLayoutSizeObj) )}}
{{ assign 'mSizeNum' ( default (get gripType mListLayoutSizeObj) (get 'small_grid' mListLayoutSizeObj) )}}
{{assign 'padSize' (append '1/3')}}


{{#if effectPage '==' 'productList'}}
<div class="{{ append 'product-list-item-parent-controller row g-4 ' productListCls }}" id="product-list-container">
{{else}}
<div class="product-list-item-parent-controller row g-4 row-cols-2 row-cols-md-{{_colNum}}">
{{/if}}
  {{#each listData as |item|}}
    <div class="col product-item-list" data-a="{{ ../gripType }}">
      {{snippet 'product/commons/product-item' containerMaxWidth=../containerMaxWidth pcSize=(cond (boolean ../effectPage '==' 'productList') (cond (boolean ../gripType '==' 'list') '200px' (append '1/' ../pcSizeNum)) (append '1/' ../_colNum)) padSize=(cond (boolean ../effectPage '===' 'productList') ../padSize null) mSize=(cond (boolean ../effectPage '==' 'productList') (append '1/' ../mSizeNum) '1/2')  previewQuery=../previewQuery imgRealWidth=../real_product_img_width spu=item forbiddenBtn=../forbiddenBtn index=@index className=../className }}
    </div>
  {{/each}}
</div>
{{#if (boolean total '>' pageSize)}}
  {{snippet 'product/commons/pagination' mode='href' id="pagination"  total=total pageSize=pageSize current=pageNum request=request }}
{{/if}}